name: Football (prefill+finals+live)

on:
  workflow_dispatch:
  schedule:
    # adjust to your cadence; example: every 15 min on game days
    - cron: "*/15 * * * *"

jobs:
  run:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install deps
        run: npm ci

      - name: Run Football.mjs (today scope)
        env:
          GOOGLE_SHEET_ID: ${{ secrets.GOOGLE_SHEET_ID }}
          GOOGLE_SERVICE_ACCOUNT: ${{ secrets.GOOGLE_SERVICE_ACCOUNT }}
          LEAGUE: nfl                 # or college-football
          TAB_NAME: NFL               # or CFB
          RUN_SCOPE: today            # keep week elsewhere if you want
          ADAPTIVE_HALFTIME: "1"      # single master sleep for halftime
          HALFTIME_EARLY_MIN: "60"
          HALFTIME_LATE_MIN: "90"
          # feature locks:
          PREFILL_ENABLED: "1"
          FINALS_ENABLED:  "1"
          LIVE_ENABLED:    "1"
        run: node Football.mjs
